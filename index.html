<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="温故知新">
<meta property="og:type" content="website">
<meta property="og:title" content="小博客园">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="小博客园">
<meta property="og:description" content="温故知新">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="小博客园">
<meta name="twitter:description" content="温故知新">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title> 小博客园 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">小博客园</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/18/es6/es6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="明月">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/wuliannan.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小博客园">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/08/18/es6/es6/" itemprop="url">
                  es6
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-18T00:00:00+08:00">
                2017-08-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="es6"><a href="#es6" class="headerlink" title="es6"></a>es6</h1><p>ECMAScript 6.0（以下简称 ES6）是 JavaScript 语言的下一代标准，已经在2015年6月正式发布了。<br>它的目标，是使得 JavaScript 语言可以用来编写复杂的大型应用程序，成为企业级开发语言。</p>
<p>学习资料参考：<a href="http://es6.ruanyifeng.com/" target="_blank" rel="external">http://es6.ruanyifeng.com/</a></p>
<h3 id="Ecmascript-和-JavaScript-的关系"><a href="#Ecmascript-和-JavaScript-的关系" class="headerlink" title="Ecmascript 和 JavaScript 的关系"></a>Ecmascript 和 JavaScript 的关系</h3><p>ECMAScript 和 JavaScript 的关系是，前者是后者的规格，<br>后者是前者的一种实现（另外的 ECMAScript 方言还有 Jscript 和 ActionScript）。<br>日常场合，这两个词是可以互换的。</p>
<h3 id="ES6-与-ECMAScript-2015-的关系"><a href="#ES6-与-ECMAScript-2015-的关系" class="headerlink" title="ES6 与 ECMAScript 2015 的关系"></a>ES6 与 ECMAScript 2015 的关系</h3><p>Ecmascript 之前的命名一直采用的是版本号的形式例如 Ecmascript 3.0 和 Ecmascript 4.0。<br>但是从 2015 年开始 官方标准组织将 Ecmascript 的命名改为了以发布的当前年份为准。</p>
<p>ES6 既是一个历史名词，也是一个泛指，含义是5.1版以后的 JavaScript 的下一代标准，<br>涵盖了ES2015、ES2016、ES2017等等，而ES2015 则是正式名称，特指该年发布的正式版本的语言标准。</p>
<h3 id="Ecmascript-历史"><a href="#Ecmascript-历史" class="headerlink" title="Ecmascript 历史"></a>Ecmascript 历史</h3><h2 id="let-和-const"><a href="#let-和-const" class="headerlink" title="let 和 const"></a>let 和 const</h2><p>let 和 const 就是解决了 var 的一些缺陷，让你的代码、变量更严谨，<br>核心就是为 JavaScript 提供了块级作用域。</p>
<p>特性：</p>
<ul>
<li>let 和 const 都是块级作用域</li>
<li>let 用来声明变量，可以选择声明的时候不赋值</li>
<li>const 用来声明常量，声明的同时必须赋值<ul>
<li>常量不可变，一旦重新赋值，直接报错</li>
<li>引用类型除外，例如：对象和数字，可以修改（重新赋值也不行）</li>
</ul>
</li>
<li>let 和 const 不存在变量提升</li>
<li>let 和 const 都绑定当前块，存在暂时性死区</li>
<li>let 和 const 不允许重复声明</li>
</ul>
<h2 id="变量的解构赋值"><a href="#变量的解构赋值" class="headerlink" title="变量的解构赋值"></a>变量的解构赋值</h2><p>数组的解构赋值：</p>
<p>对象的解构赋值：</p>
<p>字符串的解构赋值：</p>
<p>函数参数解构赋值：</p>
<p>用途：<br>1.交换变量<br>2.从函数返回多个值，可直接赋值给变量<br>3.函数参数的定义<br>4.提取json数据</p>
<hr>
<h2 id="字符串的扩展"><a href="#字符串的扩展" class="headerlink" title="字符串的扩展"></a>字符串的扩展</h2><ul>
<li>includes</li>
<li>startsWith</li>
<li>endsWith</li>
<li>模板字符串<ul>
<li>支持换行</li>
<li>使用 <code>${}</code> 引用变量，可以直接写表达式</li>
</ul>
</li>
</ul>
<h2 id="函数的扩展"><a href="#函数的扩展" class="headerlink" title="函数的扩展"></a>函数的扩展</h2><h3 id="函数参数的默认值"><a href="#函数参数的默认值" class="headerlink" title="函数参数的默认值"></a>函数参数的默认值</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">log</span>(<span class="params">x, y = <span class="string">'World'</span></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(x, y);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Point</span>(<span class="params">x = <span class="number">0</span>, y = <span class="number">0</span></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.x = x;</div><div class="line">  <span class="keyword">this</span>.y = y;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 参数默认值可以与解构赋值的默认值，结合起来使用。</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">&#123;x, y = <span class="number">5</span>&#125;</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(x, y);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fetch</span>(<span class="params">url, &#123; body = <span class="string">''</span>, method = <span class="string">'GET'</span>, headers = &#123;&#125; &#125;</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(method);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// fetch('/a')</span></div><div class="line"></div><div class="line"><span class="comment">// 双重默认值</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fetch</span>(<span class="params">url, &#123; method = <span class="string">'GET'</span> &#125; = &#123;&#125;</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(method);</div><div class="line">&#125;</div><div class="line"></div><div class="line">fetch(<span class="string">'/a'</span>) <span class="comment">// 第二个参数就是空对象</span></div><div class="line">fetch(<span class="string">'/a'</span>, &#123;&#125;) <span class="comment">// 结构生效，method 取默认值 GET</span></div><div class="line"></div><div class="line"><span class="comment">// 双重默认值写法一</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">m1</span>(<span class="params">&#123;x = <span class="number">0</span>, y = <span class="number">0</span>&#125; = &#123;&#125;</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> [x, y];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 双重默认值写法二</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">m2</span>(<span class="params">&#123;x, y&#125; = &#123; x: <span class="number">0</span>, y: <span class="number">0</span> &#125;</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> [x, y];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 通常情况下，定义了默认值的参数，应该是函数的尾参数</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x = <span class="number">1</span>, y</span>) </span>&#123; <span class="comment">// x 无法省略</span></div><div class="line">  <span class="keyword">return</span> [x, y];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 例二，无法省略</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x, y = <span class="number">5</span>, z = <span class="number">3</span></span>) </span>&#123; <span class="comment">// y 无法省略</span></div><div class="line">  <span class="keyword">return</span> [x, y, z];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 所以函数的参数默认值一般用作尾参数（最后一个，只有最后一个可以省略）</span></div><div class="line"></div><div class="line"><span class="comment">// 如果参数是对象解构就是另外一回事儿了</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">&#123;</span></span></div><div class="line">  x = <span class="number">10</span>,</div><div class="line">  y = <span class="number">20</span>,</div><div class="line">  z = <span class="number">100</span></div><div class="line">&#125;)&#123;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">f(&#123;&#125;)</div></pre></td></tr></table></figure>
<h3 id="rest-参数"><a href="#rest-参数" class="headerlink" title="rest 参数"></a>rest 参数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ...values</span></div><div class="line"><span class="comment">// ...是rest标记</span></div><div class="line"><span class="comment">// values 是随便起的一个名字</span></div><div class="line"><span class="comment">// 两者组合到一起就表示：将调用该函数的所有参数作为一个数组放到 values 中</span></div><div class="line"><span class="comment">//                       严谨一点是拿到所有剩余参数放到一个数组中</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">...values</span>) </span>&#123;</div><div class="line">  <span class="keyword">let</span> sum = <span class="number">0</span>;</div><div class="line"></div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> val <span class="keyword">of</span> values) &#123;</div><div class="line">    sum += val;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> sum;</div><div class="line">&#125;</div><div class="line"></div><div class="line">add(<span class="number">2</span>, <span class="number">5</span>, <span class="number">3</span>) <span class="comment">// 10</span></div></pre></td></tr></table></figure>
<h3 id="扩展运算符（展开运算符）"><a href="#扩展运算符（展开运算符）" class="headerlink" title="扩展运算符（展开运算符）"></a>扩展运算符（展开运算符）</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(...[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]) <span class="comment">// =&gt; console.log(1, 2, 3)</span></div><div class="line"><span class="comment">// 1 2 3</span></div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(<span class="number">1</span>, ...[<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], <span class="number">5</span>)</div><div class="line"><span class="comment">// 1 2 3 4 5</span></div><div class="line"></div><div class="line">[...document.querySelectorAll(<span class="string">'div'</span>)] <span class="comment">// [div, div, div, div]</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">push</span>(<span class="params">array, ...items</span>) </span>&#123;</div><div class="line">  array.push(...items);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x, y</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> x + y;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> numbers = [<span class="number">4</span>, <span class="number">38</span>];</div><div class="line">add(...numbers) <span class="comment">// 42</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// 合并数组</span></div><div class="line"><span class="comment">// ES5</span></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>].concat(more)</div><div class="line"><span class="comment">// ES6</span></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, ...more]</div><div class="line"></div><div class="line"><span class="keyword">var</span> arr1 = [<span class="string">'a'</span>, <span class="string">'b'</span>];</div><div class="line"><span class="keyword">var</span> arr2 = [<span class="string">'c'</span>];</div><div class="line"><span class="keyword">var</span> arr3 = [<span class="string">'d'</span>, <span class="string">'e'</span>];</div><div class="line"></div><div class="line"><span class="comment">// ES5的合并数组</span></div><div class="line">arr1.concat(arr2, arr3);</div><div class="line"><span class="comment">// [ 'a', 'b', 'c', 'd', 'e' ]</span></div><div class="line"></div><div class="line"><span class="comment">// ES6的合并数组</span></div><div class="line">[...arr1, ...arr2, ...arr3]</div><div class="line"><span class="comment">// [ 'a', 'b', 'c', 'd', 'e' ]</span></div></pre></td></tr></table></figure>
<h3 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h3><p>函数体内this的对象，就是定义时所在的对象，而不是使用时所在的对象,这点非常重要</p>
<h2 id="对象的扩展"><a href="#对象的扩展" class="headerlink" title="对象的扩展"></a>对象的扩展</h2><p>属性的简洁表示法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> foo = <span class="string">'bar'</span>;</div><div class="line"><span class="keyword">var</span> baz = &#123;foo&#125;;</div><div class="line">baz <span class="comment">// &#123;foo: "bar"&#125;</span></div><div class="line"></div><div class="line"><span class="comment">// 等同于</span></div><div class="line"><span class="keyword">var</span> baz = &#123;<span class="attr">foo</span>: foo&#125;;</div></pre></td></tr></table></figure>
<p>另一个例子：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x, y</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123;x, y&#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 等同于</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x, y</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123;<span class="attr">x</span>: x, <span class="attr">y</span>: y&#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line">f(<span class="number">1</span>, <span class="number">2</span>) <span class="comment">// Object &#123;x: 1, y: 2&#125;</span></div></pre></td></tr></table></figure>
<p>除了属性简写，方法也可以简写：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> o = &#123;</div><div class="line">  method() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="string">"Hello!"</span>;</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">f</span> : <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line"></div><div class="line">  &#125;,</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// 等同于</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> o = &#123;</div><div class="line">  <span class="attr">method</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="string">"Hello!"</span>;</div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>下面是一个实际例子：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> birth = <span class="string">'2000/01/01'</span>;</div><div class="line"></div><div class="line"><span class="keyword">var</span> Person = &#123;</div><div class="line"></div><div class="line">  <span class="attr">name</span>: <span class="string">'张三'</span>,</div><div class="line"></div><div class="line">  <span class="comment">//等同于birth: birth</span></div><div class="line">  birth,</div><div class="line"></div><div class="line">  <span class="comment">// 等同于hello: function ()...</span></div><div class="line">  hello() &#123; <span class="built_in">console</span>.log(<span class="string">'我的名字是'</span>, <span class="keyword">this</span>.name); &#125;</div><div class="line"></div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>这种写法用于函数的返回值，将会非常方便：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPoint</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> x = <span class="number">1</span>;</div><div class="line">  <span class="keyword">var</span> y = <span class="number">10</span>;</div><div class="line">  <span class="keyword">return</span> &#123;x, y&#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line">getPoint()</div><div class="line"><span class="comment">// &#123;x:1, y:10&#125;</span></div></pre></td></tr></table></figure>
<p>CommonJS模块输出变量，就非常合适使用简洁写法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> ms = &#123;&#125;;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getItem</span> (<span class="params">key</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> key <span class="keyword">in</span> ms ? ms[key] : <span class="literal">null</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">setItem</span> (<span class="params">key, value</span>) </span>&#123;</div><div class="line">  ms[key] = value;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">clear</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  ms = &#123;&#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = &#123; getItem, setItem, clear &#125;;</div><div class="line"><span class="comment">// 等同于</span></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="attr">getItem</span>: getItem,</div><div class="line">  <span class="attr">setItem</span>: setItem,</div><div class="line">  <span class="attr">clear</span>: clear</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h2><h2 id="Generator"><a href="#Generator" class="headerlink" title="Generator"></a>Generator</h2><p>处理异步流程控制</p>
<h2 id="async-函数"><a href="#async-函数" class="headerlink" title="async 函数"></a>async 函数</h2><p>处理异步流程控制</p>
<h2 id="Class"><a href="#Class" class="headerlink" title="Class"></a>Class</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// es5</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Point</span>(<span class="params">x, y</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.x = x;</div><div class="line">  <span class="keyword">this</span>.y = y;</div><div class="line">&#125;</div><div class="line"></div><div class="line">Point.prototype.toString = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="string">'('</span> + <span class="keyword">this</span>.x + <span class="string">', '</span> + <span class="keyword">this</span>.y + <span class="string">')'</span>;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Point(<span class="number">1</span>, <span class="number">2</span>);</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// es6</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</div><div class="line">  <span class="comment">// 构造函数</span></div><div class="line">  <span class="keyword">constructor</span>(x, y) &#123;</div><div class="line">    <span class="keyword">this</span>.x = x;</div><div class="line">    <span class="keyword">this</span>.y = y;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// 原型方法</span></div><div class="line">  <span class="comment">// toString 是原型方法，必须通过实例对象来调用</span></div><div class="line">  toString() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="string">'('</span> + <span class="keyword">this</span>.x + <span class="string">', '</span> + <span class="keyword">this</span>.y + <span class="string">')'</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// a 是原型方法，必须通过实例对象来调用</span></div><div class="line">  a () &#123;</div><div class="line"></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// 静态方法</span></div><div class="line">  <span class="comment">// 可以直接 Point.haha 来调用</span></div><div class="line">  <span class="keyword">static</span> haha () &#123;</div><div class="line"></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Module"><a href="#Module" class="headerlink" title="Module"></a>Module</h2><p>未完待续…</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/27/wanfu2017/缓存小结/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="明月">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/wuliannan.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小博客园">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/27/wanfu2017/缓存小结/" itemprop="url">
                  浏览器缓存
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-27T00:00:00+08:00">
                2017-07-27
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="浏览器缓存类型"><a href="#浏览器缓存类型" class="headerlink" title="浏览器缓存类型"></a>浏览器缓存类型</h2><ul>
<li><p>强缓存和协商缓存</p>
</li>
<li><p>强缓存：</p>
<ul>
<li>不会向服务器发送请求，直接从缓存中读取资源<br>在chrome控制台的network选项中可以看到该请求返回200的状态码，并且size显示from disk cache或from memory cache</li>
</ul>
</li>
<li><p>协商缓存：</p>
<ul>
<li>向服务器发送请求，服务器会根据这个请求的request header的一些参数来判断是否命中协商缓存，<br>如果命中，则返回304状态码并带上新的response header通知浏览器从缓存中读取资源</li>
</ul>
</li>
</ul>
<h2 id="缓存有关的header"><a href="#缓存有关的header" class="headerlink" title="缓存有关的header"></a>缓存有关的header</h2><ul>
<li><p>强缓存</p>
<ul>
<li>Expires：response header里的过期时间，浏览器再次加载资源时，如果在这个过期时间内，则命中强缓存。</li>
<li>Cache-Control：当值设为 max-age=300时，则代表在这个请求正确返回时间（浏览器也会记录下来）的5分钟内再次加载资源，就会命中强缓存。</li>
</ul>
</li>
<li><p>协商缓存</p>
<ul>
<li>ETag和 If-None-Match：这两个要一起说。<br>Etag是上一次加载资源时，服务器返回的response header，是对该资源的一种唯一标识，只要资源有变化，Etag就会重新生成。<br>浏览器在下一次加载资源向服务器发送请求时，会将上一次返回的Etag值放到request header里的If-None-Match里，服务器接受到If-None-Match的值后，会拿来跟该资源文件的Etag值做比较，<br>如果相同，则表示资源文件没有发生改变，命中协商缓存。</li>
<li>Last-Modified和 If-Modified-Since：这两个也要一起说。<br>Last-Modified是该资源文件最后一次更改时间，服务器会在response header里返回，同时浏览器会将这个值保存起来，在下一次发送请求时，放到request header里的If-Modified-Since里，服务器在接收到后也会做比对，<br>如果相同则命中协商缓存。</li>
</ul>
</li>
</ul>
<h2 id="浏览器缓存过程"><a href="#浏览器缓存过程" class="headerlink" title="浏览器缓存过程"></a>浏览器缓存过程</h2><ol>
<li>浏览器第一次加载资源，服务器返回200，浏览器将资源文件从服务器上请求下载下来，并把response header及该请求的返回时间一并缓存；</li>
<li>下一次加载资源时，先比较当前时间和上一次返回200时的时间差，如果没有超过cache-control设置的max-age，则没有过期，命中强缓存，不发请求直接从本地缓存读取该文件（如果浏览器不支持HTTP1.1，则用expires判断是否过期）；如果时间过期，则向服务器发送header带有If-None-Match和If-Modified-Since的请求；</li>
<li>服务器收到请求后，优先根据Etag的值判断被请求的文件有没有做修改，Etag值一致则没有修改，命中协商缓存，返回304；如果不一致则有改动，直接返回新的资源文件带上新的Etag值并返回200；</li>
<li>如果服务器收到的请求没有Etag值，则将If-Modified-Since和被请求文件的最后修改时间做比对，一致则命中协商缓存，返回304；不一致则返回新的last-modified和文件并返回200；</li>
</ol>
<h2 id="用户行为对浏览器缓存的控制"><a href="#用户行为对浏览器缓存的控制" class="headerlink" title="用户行为对浏览器缓存的控制"></a>用户行为对浏览器缓存的控制</h2><ul>
<li>地址栏访问，链接跳转是正常用户行为，将会触发浏览器缓存机制；</li>
<li>F5刷新，浏览器会设置max-age=0，跳过强缓存判断，会进行协商缓存判断；</li>
<li>ctrl+F5刷新，跳过强缓存和协商缓存，直接从服务器拉取资源。</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/06/20/wanfu2017/前后端分离/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="明月">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/wuliannan.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小博客园">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/06/20/wanfu2017/前后端分离/" itemprop="url">
                  前后端分离
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-20T00:00:00+08:00">
                2017-06-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="正确理解前后端分离"><a href="#正确理解前后端分离" class="headerlink" title="正确理解前后端分离"></a>正确理解前后端分离</h2><ul>
<li>前后端分离并不只是开发模式，而是Web应用的一种架构模式。</li>
<li>在开发期，前后端工程师可以通过约定好交互接口，实现并行开发；</li>
<li>在运行期，前后端分离模式需要对Web应用进行分离部署，前后端之间使用HTTP请求进行交互。<br>我们可以从交互形式、代码组织方式、开发模式三个方面对前后端分离进行认识。</li>
</ul>
<h3 id="交互形式"><a href="#交互形式" class="headerlink" title="交互形式"></a>交互形式</h3><ul>
<li>在前后端分离架构中，后端只需要负责按照约定的数据格式向前端提供可调用的API服务即可。</li>
<li>前后端之间通过HTTP请求进行交互，前端获取到数据后，进行页面的装配和渲染。</li>
</ul>
<h3 id="代码组织方式"><a href="#代码组织方式" class="headerlink" title="代码组织方式"></a>代码组织方式</h3><p><img src="images/codeType.jpg" alt="代码组织方式图"></p>
<ul>
<li>在传统架构模式中，前后端代码存放于同一个代码库中，甚至是同一工程目录下。页面中还夹杂着后端代码。前后端工程师进行开发时，都必须把整个项目导入到开发工具中。</li>
<li>而前后端分离模式在代码组织形式上有以下两种：<ul>
<li>半分离<br>前后端共用一个代码库，但是代码分别存放在两个工程中。<br>后端不关心或很少关心前端元素的输出情况，前端不能独立进行开发和测试，项目中缺乏前后端交互的测试用例。</li>
<li>分离<br>前后端代码库分离，前端代码中有可以进行Mock测试（通过构造虚拟测试对象以简化测试环境的方法）的伪后端，能支持前端的独立开发和测试。<br>而后端代码中除了功能实现外，还有着详细的测试用例，以保证API的可用性，降低集成风险。</li>
</ul>
</li>
</ul>
<h3 id="开发模式"><a href="#开发模式" class="headerlink" title="开发模式"></a>开发模式</h3><ul>
<li>在前后端分离架构中，前端工程师只需要编写HTML、js、CSS等前端资源，然后通过HTTP请求调用后端提供的服务即可。除了开发期的分离，在运行期前后端资源也会进行分离部署。</li>
</ul>
<h2 id="要“离”：几个好处"><a href="#要“离”：几个好处" class="headerlink" title="要“离”：几个好处:"></a>要“离”：几个好处:</h2><ol>
<li>提升开发效率</li>
<li>完美应对复杂多变的前端需求</li>
<li>增强代码可维护性</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/02/wanfu2017/css规范小点/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="明月">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/wuliannan.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小博客园">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/02/wanfu2017/css规范小点/" itemprop="url">
                  css规范小点
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-02T00:00:00+08:00">
                2017-05-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="文件"><a href="#文件" class="headerlink" title="文件"></a>文件</h2><p>CSS 文件使用无 BOM 的 UTF-8 编码</p>
<h2 id="缩进"><a href="#缩进" class="headerlink" title="缩进"></a>缩进</h2><p>使用 4 个空格做为一个缩进层级，不允许使用 2 个空格 或 tab 字符</p>
<h2 id="空格"><a href="#空格" class="headerlink" title="空格"></a>空格</h2><ul>
<li>选择器 与 <code>{</code> 之间必须包含空格</li>
<li>属性名 与之后的 : 之间不允许包含空格， : 与 属性值 之间必须包含空格。</li>
<li>列表型属性值 书写在单行时，, 后必须跟一个空格。<h2 id="选择器"><a href="#选择器" class="headerlink" title="选择器"></a>选择器</h2></li>
<li>当集体声明多个 selector 时，每个选择器声明必须独占一行</li>
<li><code>&gt;</code>、<code>+</code>、<code>~</code> 选择器的两边各保留一个空格<h2 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h2></li>
<li>属性定义必须另起一行</li>
<li>属性定义后必须以分号结尾<h2 id="清除浮动"><a href="#清除浮动" class="headerlink" title="清除浮动"></a>清除浮动</h2></li>
<li>当元素需要撑起高度以包含内部的浮动元素时，通过对伪类设置 clear 或触发 BFC 的方式进行 clearfix。尽量不使用增加空标签的方式。</li>
<li>对已经触发 BFC 的元素不需要再进行 clearfix。<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2></li>
</ul>
<ol>
<li>选择器的嵌套层级应不大于 3 级，位置靠后的限定条件应尽可能精确</li>
<li>在可以使用缩写的情况下，尽量使用属性缩写</li>
<li>使用 border / margin / padding等缩写时，应注意隐含值对实际数值的影响，确实需要设置多个方向的值时才使用缩写</li>
<li>当数值为 0 - 1 之间的小数时，省略整数部分的 0</li>
<li>长度为 0 时须省略单位。 (也只有长度单位可省)</li>
<li>url() 函数中的路径不加引号</li>
<li>颜色值不允许使用命名色值</li>
<li>层级(z-index)必须清晰明确，页面弹窗、气泡为最高级（最高级为999），不同弹窗气泡之间可在三位数之间调整</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/04/wanfu2017/map/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="明月">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/wuliannan.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小博客园">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/04/wanfu2017/map/" itemprop="url">
                  map方法巧用
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-04T00:00:00+08:00">
                2017-04-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="jQuery-遍历-map-方法"><a href="#jQuery-遍历-map-方法" class="headerlink" title="jQuery 遍历 - map() 方法"></a>jQuery 遍历 - map() 方法</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$(&quot;p&quot;).append( $(&quot;input&quot;).map(function()&#123;</div><div class="line">  return $(this).val();</div><div class="line">&#125;).get().join(&quot;, &quot;) );</div></pre></td></tr></table></figure>
<h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><p>map() 把每个元素通过函数传递到当前匹配集合中，生成包含返回值的新的 jQuery 对象。</p>
<h2 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h2><p><code>.map(callback(index,domElement))</code></p>
<h2 id="详细说明"><a href="#详细说明" class="headerlink" title="详细说明"></a>详细说明</h2><ul>
<li>由于返回值是 jQuery 封装的数组，使用 get() 来处理返回的对象以得到基础的数组。</li>
<li><code>.map()</code> 方法对于获得或设置元素集的值特别有用<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">&lt;form method=&quot;post&quot; action=&quot;&quot;&gt;</div><div class="line">  &lt;fieldset&gt;</div><div class="line">    &lt;div&gt;</div><div class="line">      &lt;label for=&quot;two&quot;&gt;2&lt;/label&gt;</div><div class="line">      &lt;input type=&quot;checkbox&quot; value=&quot;2&quot; id=&quot;two&quot; name=&quot;number[]&quot;&gt;</div><div class="line">    &lt;/div&gt;</div><div class="line">    &lt;div&gt;</div><div class="line">      &lt;label for=&quot;four&quot;&gt;4&lt;/label&gt;</div><div class="line">      &lt;input type=&quot;checkbox&quot; value=&quot;4&quot; id=&quot;four&quot; name=&quot;number[]&quot;&gt;</div><div class="line">    &lt;/div&gt;</div><div class="line">    &lt;div&gt;</div><div class="line">      &lt;label for=&quot;six&quot;&gt;6&lt;/label&gt;</div><div class="line">      &lt;input type=&quot;checkbox&quot; value=&quot;6&quot; id=&quot;six&quot; name=&quot;number[]&quot;&gt;</div><div class="line">    &lt;/div&gt;</div><div class="line">    &lt;div&gt;</div><div class="line">      &lt;label for=&quot;eight&quot;&gt;8&lt;/label&gt;</div><div class="line">      &lt;input type=&quot;checkbox&quot; value=&quot;8&quot; id=&quot;eight&quot; name=&quot;number[]&quot;&gt;</div><div class="line">    &lt;/div&gt;</div><div class="line">  &lt;/fieldset&gt;</div><div class="line">&lt;/form&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>我们能够获得复选框 ID 组成的逗号分隔的列表：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$(&apos;:checkbox&apos;).map(function() &#123;</div><div class="line">  return this.id;</div><div class="line">&#125;).get().join(&apos;,&apos;);</div></pre></td></tr></table></figure></p>
<p>在 callback 函数内部，this 引用每次迭代的当前 DOM 元素。该函数可返回单独的数据项，或者是要被插入结果集中的数据项的数组。如果返回的是数组，数组内的元素会被插入集合中。如果函数返回 null 或 undefined，则不会插入任何元素。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/01/wanfu2017/浏览器默认行为/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="明月">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/wuliannan.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小博客园">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/01/wanfu2017/浏览器默认行为/" itemprop="url">
                  浏览器默认行为
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-01T00:00:00+08:00">
                2017-04-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="浏览器默认行为"><a href="#浏览器默认行为" class="headerlink" title="浏览器默认行为"></a>浏览器默认行为</h1><ul>
<li>history.go(-1)返回当前页的上一页，表单的数据还在。</li>
<li>history.back(-1)返回当前页的上一页，数据全部消失，是个新页面。</li>
<li>history.back(0)是刷新</li>
<li>location.reload()是刷新</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/01/vue/vue1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="明月">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/wuliannan.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小博客园">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/01/vue/vue1/" itemprop="url">
                  vue基础
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-03-01T00:00:00+08:00">
                2017-03-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="搭建自动刷新环境"><a href="#搭建自动刷新环境" class="headerlink" title="搭建自动刷新环境"></a>搭建自动刷新环境</h2><p>创建一个 <code>package.josn</code> 文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm init -y</div></pre></td></tr></table></figure>
<p>安装 <code>browser-sync</code>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># npm install --save-dev browser-sync</span></div><div class="line"><span class="comment"># 将 browser-sync 包保存到开发依赖中</span></div><div class="line"><span class="comment"># 就可以执行 npm install 的时候加入 --production 选项不安装这个包</span></div><div class="line">npm i -D browser-sync</div></pre></td></tr></table></figure>
<p>在 package.json 文件中加入以下内容：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">"scripts": &#123;</div><div class="line">  "test": "echo \"Error: no test specified\" &amp;&amp; exit 1",</div><div class="line">  "start": "browser-sync start --server --directory --files \"code/*.html\""</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>打开终端，启动开发预览服务：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm start</div></pre></td></tr></table></figure>
<hr>
<h2 id="Vue-实例"><a href="#Vue-实例" class="headerlink" title="Vue 实例"></a>Vue 实例</h2><ul>
<li>每个 Vue.js 应用都是通过构造函数 Vue 创建的<ul>
<li>new Vue 可以认为是 ng 中的控制器</li>
<li>这个控制器管理 el 属性指定的节点</li>
</ul>
</li>
<li><p>在实例化 Vue 时，需要传入一个选项对象，它可以包含数据、模板、挂载元素、方法、生命周期钩子等选项</p>
<ul>
<li>data: 属性数据</li>
<li>computed: 计算属性</li>
<li>methods: 方法</li>
<li>el: 挂载点</li>
<li>directives: 自定义指令</li>
<li>filters: 自定义过滤器</li>
<li>…</li>
<li>全部选项可以在 API 文档中查看：<a href="https://cn.vuejs.org/v2/api/" target="_blank" rel="external">https://cn.vuejs.org/v2/api/</a></li>
</ul>
</li>
<li><p>实例选项：data</p>
<ul>
<li><a href="https://cn.vuejs.org/v2/guide/instance.html#属性与方法" target="_blank" rel="external">https://cn.vuejs.org/v2/guide/instance.html#属性与方法</a></li>
<li><a href="https://cn.vuejs.org/v2/api/#data" target="_blank" rel="external">选项/数据 - data</a></li>
<li><a href="https://cn.vuejs.org/v2/guide/reactivity.html" target="_blank" rel="external">深入响应式原理</a></li>
<li>作用：根据视图抽象数据模型，data 就是 ViewModel</li>
<li>data 就是数据驱动视图中的 数据</li>
<li><strong>注意：视图中使用的数据必须在 data 中初始化</strong></li>
<li>每个 Vue 实例都会代理其 data 对象里所有的属性<ul>
<li>也可以通过 vue 实例的 $data 属性访问 data 中的数据</li>
<li>建议：如果要使用 vm 读取或修改  data 中的数据，建议通过 <code>vm.$data</code> 去访问修改</li>
</ul>
</li>
<li>只有被初始代理的属性是响应式的<ul>
<li>如果是在实例创建之后添加新的属性到实例上，它不会触发视图更新</li>
</ul>
</li>
<li>Vue 不允许在已经创建的实例上动态添加新的根级响应式属性</li>
</ul>
<ul>
<li>Vue 不能检测到对象属性的动态添加或删除<ul>
<li>也就是说动态添加或删除的对象属性不是响应式的</li>
<li>如果希望动态添加和删除对象的属性是响应式的则需要通过：<ul>
<li><code>Vue.set( object, key, value )</code></li>
<li>或 <code>vm.$set( object, key, value )</code></li>
</ul>
</li>
<li>如果删除对象属性是响应式的：<ul>
<li><code>Vue.delete( object, key )</code></li>
<li>或 <code>vm.$delete( object, key )</code></li>
</ul>
</li>
<li>也就是说 data 中的对象成员如果动态的添加属性是不会得到视图的更新的</li>
<li>如果想要动态添加和删除的时候得到视图的更新则一定要通过 vm.$set 或者 vm.$delete 来处理</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>实例选项：methods</p>
<ul>
<li><a href="https://cn.vuejs.org/v2/api/#methods" target="_blank" rel="external">https://cn.vuejs.org/v2/api/#methods</a></li>
<li>作用：为视图交互提供行为函数</li>
<li>可以在行为函数中通过 <code>this</code> 访问 data 中的数据成员</li>
<li>注意：methods 中的行为函数不要写箭头函数<ul>
<li>因为这样会改变内部 this 的指向</li>
</ul>
</li>
</ul>
</li>
<li><p>实例属性</p>
<ul>
<li>vue 实例可以直接访问 data 中的数据成员</li>
<li>也可以通过 实例.$data.data中的数据成员 进行访问</li>
<li>建议使用 实例.$data.数据成员 去修改</li>
<li><a href="https://cn.vuejs.org/v2/api/#实例属性" target="_blank" rel="external">https://cn.vuejs.org/v2/api/#实例属性</a></li>
<li>$data<ul>
<li>Vue 实例观察的数据对象。Vue 实例代理了对其 data 对象属性的访问。</li>
</ul>
</li>
<li>$el<ul>
<li>Vue 实例使用的根 DOM 元素</li>
</ul>
</li>
</ul>
</li>
<li><p>实例方法/数据</p>
<ul>
<li><a href="https://cn.vuejs.org/v2/api/#实例方法-数据" target="_blank" rel="external">https://cn.vuejs.org/v2/api/#实例方法-数据</a></li>
<li>$watch<ul>
<li>可以用来监视数据成员的变化，当数据成员发生变化，执行 watch 函数</li>
</ul>
</li>
<li>$set  Vue.set 的别名</li>
<li>$delete Vue.delete 的别名</li>
</ul>
</li>
</ul>
<hr>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/06/13/wanfu2017/cookie/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="明月">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/wuliannan.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小博客园">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/13/wanfu2017/cookie/" itemprop="url">
                  Cookie
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-06-13T00:00:00+08:00">
                2016-06-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h2><ul>
<li>维基百科-Cookie：<a href="https://zh.wikipedia.org/zh-hans/Cookie" target="_blank" rel="external">https://zh.wikipedia.org/zh-hans/Cookie</a></li>
</ul>
<h3 id="什么是-Cookie"><a href="#什么是-Cookie" class="headerlink" title="什么是 Cookie"></a>什么是 Cookie</h3><p>Cookie 是实现BS交互模型的一种 <strong>状态保持</strong> 解决方案。<br>可以实现例如记住我、购物车、记住用户名等功能。</p>
<h3 id="Cookie-用来解决什么问题的"><a href="#Cookie-用来解决什么问题的" class="headerlink" title="Cookie 用来解决什么问题的"></a>Cookie 用来解决什么问题的</h3><p>BS交互模型（HTTP）是无状态的，<br>也就是说浏览器和服务器交互的过程中每一次交互都是一个新的请求和响应，<br>这样的话就是导致一些问题，例如我希望记住不同用户的不同状态，<br>不同用户的购物车等状态数据就比较麻烦了。</p>
<p>无状态其实也还是具有一些优势的：</p>
<ul>
<li>减少服务器的资源消耗</li>
</ul>
<p>保留无状态协议的特征又需要解决类似的矛，于是引入了 Cookie 技术。</p>
<h3 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用"></a>如何使用</h3><ul>
<li>Cookie 技术通过在请求和响应报文头中加入 Cookie 信息来实现客户端状态保持</li>
<li>Cookie 会根据从服务器发送的响应报文头中的 Set-Cookie 首部信息字段，通过客户端保存 Cookie</li>
<li>当下次客户端再往该服务器发送请求时，客户端会自动在请求报文中加入 Cookie 值后发送给服务器</li>
<li>服务端发现客户端发送过来的 Cookie 后<ul>
<li>会先去检查是从哪个客户端发送的连接请求，然后对比服务器上的记录</li>
<li>最后得到之前的状态信息</li>
</ul>
</li>
</ul>
<h3 id="Cookie-的分类"><a href="#Cookie-的分类" class="headerlink" title="Cookie 的分类"></a>Cookie 的分类</h3><ul>
<li>会话 Cookie</li>
<li>持久 Cookie</li>
</ul>
<h3 id="Cookie-的使用场景"><a href="#Cookie-的使用场景" class="headerlink" title="Cookie 的使用场景"></a>Cookie 的使用场景</h3><h3 id="Cookie-的缺陷"><a href="#Cookie-的缺陷" class="headerlink" title="Cookie 的缺陷"></a>Cookie 的缺陷</h3><h2 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h2>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/05/05/node/node4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="明月">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/wuliannan.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小博客园">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/05/node/node4/" itemprop="url">
                  Express
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-05-05T00:00:00+08:00">
                2016-05-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Express"><a href="#Express" class="headerlink" title="Express"></a>Express</h2><ul>
<li>作者：<a href="https://github.com/tj" target="_blank" rel="external">https://github.com/tj</a></li>
<li>Github：<a href="https://github.com/expressjs/express" target="_blank" rel="external">https://github.com/expressjs/express</a></li>
<li>官网：<a href="http://expressjs.com/" target="_blank" rel="external">http://expressjs.com/</a></li>
<li>中文翻译：<a href="http://www.expressjs.com.cn/" target="_blank" rel="external">http://www.expressjs.com.cn/</a></li>
<li>awesome-express: <a href="https://github.com/wabg/awesome-express" target="_blank" rel="external">https://github.com/wabg/awesome-express</a></li>
</ul>
<h3 id="起步"><a href="#起步" class="headerlink" title="起步"></a>起步</h3><p>安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install --save express</div></pre></td></tr></table></figure>
<p>hello world：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>)</div><div class="line"><span class="keyword">var</span> app = express()</div><div class="line"></div><div class="line">app.get(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</div><div class="line">  res.send(<span class="string">'Hello World!'</span>)</div><div class="line">&#125;)</div><div class="line"></div><div class="line">app.listen(<span class="number">3000</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'Example app listening on port 3000!'</span>)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>基本路由：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">app.get(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</div><div class="line">  res.send(<span class="string">'Hello World!'</span>)</div><div class="line">&#125;)</div><div class="line"></div><div class="line">app.post(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</div><div class="line">  res.send(<span class="string">'Got a POST request'</span>)</div><div class="line">&#125;)</div><div class="line"></div><div class="line">app.put(<span class="string">'/user'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</div><div class="line">  res.send(<span class="string">'Got a PUT request at /user'</span>)</div><div class="line">&#125;)</div><div class="line"></div><div class="line">app.delete(<span class="string">'/user'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</div><div class="line">  res.send(<span class="string">'Got a DELETE request at /user'</span>)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="Express-中外置路由使用"><a href="#Express-中外置路由使用" class="headerlink" title="Express 中外置路由使用"></a>Express 中外置路由使用</h3><p>router.js 文件代码如下:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 1. 加载 express 模块</span></div><div class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>)</div><div class="line"></div><div class="line"><span class="comment">// 2. 调用 express.Router() 方法，得到一个路由容器实例</span></div><div class="line"><span class="keyword">var</span> router = express.Router()</div><div class="line"></div><div class="line"><span class="comment">// 3. 为 router 添加不同的路由</span></div><div class="line">router.get(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</div><div class="line">  res.send(<span class="string">'hello express'</span>)</div><div class="line">&#125;)</div><div class="line"></div><div class="line">router.get(<span class="string">'/add'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</div><div class="line"></div><div class="line">&#125;)</div><div class="line"></div><div class="line">router.get(<span class="string">'/info'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</div><div class="line"></div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="comment">// 4. 将 router 路由容器导出</span></div><div class="line"><span class="built_in">module</span>.exports = router</div></pre></td></tr></table></figure>
<p>在 app.js 文件中：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>)</div><div class="line"></div><div class="line"><span class="comment">// 1. 加载路由模块</span></div><div class="line"><span class="keyword">var</span> router = <span class="built_in">require</span>(<span class="string">'./router'</span>)</div><div class="line"></div><div class="line"><span class="keyword">var</span> app = express()</div><div class="line"></div><div class="line"><span class="comment">// 2. 将路由模块导出的路由容器 router 通过 app.use() 方法挂载到 app 实例上</span></div><div class="line"><span class="comment">//    这样的话咱们的 app 实例程序就拥有了 router 的路由了</span></div><div class="line">app.use(router)</div><div class="line"></div><div class="line">app.listen(<span class="number">3000</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'running...'</span>)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="在-Express-中处理静态资源"><a href="#在-Express-中处理静态资源" class="headerlink" title="在 Express 中处理静态资源"></a>在 Express 中处理静态资源</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">app.use(express.static(<span class="string">'public'</span>))</div><div class="line">app.use(express.static(<span class="string">'files'</span>))</div><div class="line"></div><div class="line">app.use(<span class="string">'/public'</span>, express.static(<span class="string">'public'</span>))</div><div class="line">app.use(<span class="string">'/aaa'</span>, express.static(<span class="string">'public'</span>))</div><div class="line"></div><div class="line">app.use(<span class="string">'/static'</span>, express.static(path.join(__dirname, <span class="string">'public'</span>)))</div></pre></td></tr></table></figure>
<h3 id="使用-Express-中的路由"><a href="#使用-Express-中的路由" class="headerlink" title="使用 Express 中的路由"></a>使用 Express 中的路由</h3><h3 id="在-Express-中使用-ejs-模板引擎"><a href="#在-Express-中使用-ejs-模板引擎" class="headerlink" title="在 Express 中使用 ejs 模板引擎"></a>在 Express 中使用 ejs 模板引擎</h3><p>安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm i -S ejs</div></pre></td></tr></table></figure>
<p>配置：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">app.set(<span class="string">'view engine'</span>, <span class="string">'ejs'</span>)</div><div class="line"></div><div class="line"><span class="comment">// Express 默认去 views 目录中查找视图模板文件，可以通过下面的 API 修改</span></div><div class="line">app.set(<span class="string">'views'</span>, 模板文件存储路径)</div></pre></td></tr></table></figure>
<p>如果要自定义修改模板文件的 <code>.ejs</code> 后缀或者修改 <code>&lt;%</code> 语法，则需要通过加载 <code>ejs</code> 模块做详细配置</p>
<h3 id="Express-中间件"><a href="#Express-中间件" class="headerlink" title="Express 中间件"></a>Express 中间件</h3><h4 id="中间件函数"><a href="#中间件函数" class="headerlink" title="中间件函数"></a>中间件函数</h4><h4 id="中间件执行流程"><a href="#中间件执行流程" class="headerlink" title="中间件执行流程"></a>中间件执行流程</h4><h4 id="中间件使用场景"><a href="#中间件使用场景" class="headerlink" title="中间件使用场景"></a>中间件使用场景</h4><h4 id="第三方中间件推荐"><a href="#第三方中间件推荐" class="headerlink" title="第三方中间件推荐"></a>第三方中间件推荐</h4><h3 id="在-Express-中使用中间件处理-404-页面"><a href="#在-Express-中使用中间件处理-404-页面" class="headerlink" title="在 Express 中使用中间件处理 404 页面"></a>在 Express 中使用中间件处理 404 页面</h3><h3 id="在-Express-中使用中间件全局处理错误"><a href="#在-Express-中使用中间件全局处理错误" class="headerlink" title="在 Express 中使用中间件全局处理错误"></a>在 Express 中使用中间件全局处理错误</h3><h3 id="API"><a href="#API" class="headerlink" title="API"></a>API</h3><ul>
<li>express()</li>
<li>Application</li>
<li>Request</li>
<li>Response</li>
<li>Router</li>
</ul>
<hr>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/05/02/node/node3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="明月">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/wuliannan.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小博客园">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/02/node/node3/" itemprop="url">
                  模块化
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-05-02T00:00:00+08:00">
                2016-05-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Node-中的模块化"><a href="#Node-中的模块化" class="headerlink" title="Node 中的模块化"></a>Node 中的模块化</h2><h3 id="CommonJS"><a href="#CommonJS" class="headerlink" title="CommonJS"></a>CommonJS</h3><p>Node 中的模块化采用了 CommonJS 模块规范，CommonJS 不仅仅是模块规范，<br>它为 JavaScript 制定了很多服务端的所谓的规范（API），例如二进制操作、网络操作等。</p>
<ul>
<li>require</li>
<li>exports<ul>
<li>exports 是 module.exports 的一个引用，也就是一个别名</li>
<li></li>
</ul>
</li>
<li>module.exports</li>
</ul>
<h3 id="模块分类"><a href="#模块分类" class="headerlink" title="模块分类"></a>模块分类</h3><ul>
<li>核心模块<ul>
<li>由 node 本身提供，通过唯一的模块标识名进行加载</li>
<li>核心模块本质上也是文件模块，它已经被编译到了可执行文件中了</li>
</ul>
</li>
<li>第三方模块<ul>
<li>由社区提供</li>
</ul>
</li>
<li>用户自定义模块<ul>
<li>咱们自己写的</li>
</ul>
</li>
</ul>
<h3 id="require-加载模块查找规则"><a href="#require-加载模块查找规则" class="headerlink" title="require 加载模块查找规则"></a>require 加载模块查找规则</h3><p>require 函数接收的参数叫做模块标识符：</p>
<ul>
<li>核心模块<ul>
<li>先看下有缓存，如果有直接拿过来</li>
<li>如果没有，则直接加载</li>
</ul>
</li>
<li>自己写的模块<ul>
<li>以 <code>./</code> 或者 <code>../</code> 或者 <code>/</code> 或者 <code>c:/xxx</code> 类似于这样的标识路径</li>
<li><code>/</code> 是当前文件模块所属磁盘根目录</li>
<li><code>c:/xxx</code> 就是绝对路径</li>
</ul>
</li>
<li>第三方模块：包<ul>
<li>先基于当前文件模块所属目录找 node_modules 目录</li>
<li>如果找到，则去该目录中找 moment 目录</li>
<li>如果找到 moment 目录，则找该目录中的 package.json 文件</li>
<li>如果找到 package.json 文件，则找该文件中的 main 属性</li>
<li>如果找到 main 属性，则拿到该属性对应的文件路径</li>
<li>如果找到 moment 目录之后<ul>
<li>发现没有 package.json </li>
<li>或者 有 package.json 没有 main 属性</li>
<li>或者 有 main 属性，但是指向的路径不存在</li>
<li>则 node 会默认去看一下 moment 目录中有没有 index.js index.node index.json 文件</li>
</ul>
</li>
<li>如果找不到 index 或者找不到 moment 或者找不到 node_modules</li>
<li>则进入上一级目录找 node_moudles 查找规则同上</li>
<li>如果上一级还找不到，继续向上，一直到当前文件所属磁盘根目录，</li>
<li>如果最后到磁盘根目录还找不到，最后报错：<code>can not find module xxx</code></li>
</ul>
</li>
</ul>
<hr>
<h2 id="path-模块"><a href="#path-模块" class="headerlink" title="path 模块"></a>path 模块</h2><h2 id="fs-模块"><a href="#fs-模块" class="headerlink" title="fs 模块"></a>fs 模块</h2><h2 id="http-模块"><a href="#http-模块" class="headerlink" title="http 模块"></a>http 模块</h2><h3 id="http-模块相关属性及方法"><a href="#http-模块相关属性及方法" class="headerlink" title="http 模块相关属性及方法"></a>http 模块相关属性及方法</h3><ul>
<li>http.METHODS<ul>
<li>获取 http 支持的请求方法</li>
</ul>
</li>
<li>http.STATUS_CODES<ul>
<li>获取 http 模块支持的状态码</li>
</ul>
</li>
<li>http.createClient([port][, host])<ul>
<li>创建客户端，使用 Node 发送请求</li>
</ul>
</li>
<li>http.createServer([requestListener])<ul>
<li>创建服务器，接收客户端请求</li>
</ul>
</li>
<li>http.get(options[, callback])<ul>
<li>发起 get 请求</li>
</ul>
</li>
<li>http.globalAgent</li>
<li>http.request(options[, callback])<ul>
<li>发请求</li>
</ul>
</li>
</ul>
<h3 id="Class-http-Server-服务实例对象"><a href="#Class-http-Server-服务实例对象" class="headerlink" title="Class: http.Server 服务实例对象"></a>Class: http.Server 服务实例对象</h3><p>事件：</p>
<ul>
<li>Event: ‘checkContinue’</li>
<li>Event: ‘checkExpectation’</li>
<li>Event: ‘clientError’</li>
<li>Event: ‘close’</li>
<li>Event: ‘connect’</li>
<li>Event: ‘connection’</li>
<li>Event: ‘request’<ul>
<li>请求事件</li>
</ul>
</li>
<li>Event: ‘upgrade’</li>
</ul>
<p>方法：</p>
<ul>
<li>server.close([callback])<ul>
<li>关闭服务器</li>
</ul>
</li>
<li>server.listen(handle[, callback])<ul>
<li>绑定监听</li>
</ul>
</li>
<li>server.listen(path[, callback])<ul>
<li>绑定监听</li>
</ul>
</li>
<li>server.listen([port][, hostname][, backlog][, callback])<ul>
<li>绑定监听</li>
</ul>
</li>
<li>server.listening</li>
<li>server.maxHeadersCount</li>
<li>server.setTimeout(msecs, callback)</li>
<li>server.timeout</li>
</ul>
<h3 id="Class-http-ServerResponse-响应对象"><a href="#Class-http-ServerResponse-响应对象" class="headerlink" title="Class: http.ServerResponse 响应对象"></a>Class: http.ServerResponse 响应对象</h3><p>事件：</p>
<ul>
<li>Event: ‘close’</li>
<li>Event: ‘finish’</li>
</ul>
<p>方法：</p>
<ul>
<li>response.addTrailers(headers)</li>
<li>response.end([data][, encoding][, callback])<ul>
<li>结束响应</li>
</ul>
</li>
<li>response.finished</li>
<li>response.getHeader(name)</li>
<li>response.headersSent</li>
<li>response.removeHeader(name)</li>
<li>response.sendDate</li>
<li>response.setHeader(name, value)</li>
<li>response.setTimeout(msecs, callback)</li>
<li>response.statusCode<ul>
<li>状态码</li>
</ul>
</li>
<li>response.statusMessage<ul>
<li>状态短语</li>
</ul>
</li>
<li>response.write(chunk[, encoding][, callback])<ul>
<li>写入响应流数据</li>
</ul>
</li>
<li>response.writeContinue()</li>
<li>response.writeHead(statusCode[, statusMessage][, headers])<ul>
<li>写入响应头</li>
</ul>
</li>
</ul>
<h3 id="Request（http-IncomingMessage）请求对象"><a href="#Request（http-IncomingMessage）请求对象" class="headerlink" title="Request（http.IncomingMessage）请求对象"></a>Request（http.IncomingMessage）请求对象</h3><p>事件：</p>
<p>Event: ‘aborted’<br>Event: ‘close’</p>
<p>方法：</p>
<ul>
<li>message.destroy([error])</li>
<li>message.headers<ul>
<li>获取请求头</li>
</ul>
</li>
<li>message.httpVersion<ul>
<li>获取 http 协议版本</li>
</ul>
</li>
<li>message.method<ul>
<li>获取请求方法</li>
</ul>
</li>
<li>message.rawHeaders</li>
<li>message.rawTrailers</li>
<li>message.setTimeout(msecs, callback)</li>
<li>message.statusCode</li>
<li>message.statusMessage</li>
<li>message.socket</li>
<li>message.trailers</li>
<li>message.url<ul>
<li>获取请求路径</li>
</ul>
</li>
</ul>
<hr>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/wuliannan.jpg"
               alt="明月" />
          <p class="site-author-name" itemprop="name">明月</p>
           
              <p class="site-description motion-element" itemprop="description">温故知新</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">32</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">明月</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  






  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  


  




	





  





  





  






  





  

  

  

  

</body>
</html>
